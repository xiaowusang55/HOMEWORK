<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
  <style>
    a {
      text-decoration: none;
    }
  </style>
</head>
<body onload="goPage(1, 10);">
    <table id="idData" width="70%">
        <tr><td>user2</td><td>25</td><td>male</td><td>shanxi</td></tr>
        <tr><td>user3</td><td>25</td><td>male</td><td>shanxi</td></tr>
        <tr><td>user4</td><td>25</td><td>male</td><td>shanxi</td></tr>
        <tr><td>user2</td><td>25</td><td>male</td><td>shanxi</td></tr>
        <tr><td>user3</td><td>25</td><td>male</td><td>shanxi</td></tr>
        <tr><td>user4</td><td>25</td><td>male</td><td>shanxi</td></tr>
        <tr><td>user2</td><td>25</td><td>male</td><td>shanxi</td></tr>
        <tr><td>user3</td><td>25</td><td>male</td><td>shanxi</td></tr>
        <tr><td>user4</td><td>25</td><td>male</td><td>shanxi</td></tr>
        <tr><td>user2</td><td>25</td><td>male</td><td>shanxi</td></tr>
        <tr><td>user3</td><td>25</td><td>male</td><td>shanxi</td></tr>
        <tr><td>user4</td><td>25</td><td>male</td><td>shanxi</td></tr>
        <tr><td>user2</td><td>25</td><td>male</td><td>shanxi</td></tr>
        <tr><td>user3</td><td>25</td><td>male</td><td>shanxi</td></tr>
        <tr><td>user4</td><td>25</td><td>male</td><td>shanxi</td></tr>
        <tr><td>user2</td><td>25</td><td>male</td><td>shanxi</td></tr>
        <tr><td>user3</td><td>25</td><td>male</td><td>shanxi</td></tr>
        <tr><td>user4</td><td>25</td><td>male</td><td>shanxi</td></tr>
        <tr><td>user2</td><td>25</td><td>male</td><td>shanxi</td></tr>
        <tr><td>user3</td><td>25</td><td>male</td><td>shanxi</td></tr>
        <tr><td>user4</td><td>25</td><td>male</td><td>shanxi</td></tr>
        <tr><td>user2</td><td>25</td><td>male</td><td>shanxi</td></tr>
        <tr><td>user3</td><td>25</td><td>male</td><td>shanxi</td></tr>
        <tr><td>user4</td><td>25</td><td>male</td><td>shanxi</td></tr>
      </table>
    <table width="60%" align="right">
      <tr><td><div id="barcon" name="barcon"></div></td></tr>
    </table>

    <script>
      /**
      * 分页函数
      * pno--页数
      * psize--每页显示记录数
      * 分页部分是从真实数据行开始，因而存在加减某个常数，以确定真正的记录数
      * 纯js分页实质是数据行全部加载，通过是否显示属性完成分页功能
      **/
      function goPage(pno, psize) {
        let itable = document.getElementById("idData");
        let num = itable.rows.length; //表格所有行
        console.log(num);
        let totalPage = 0; //总页数
        let pageSize = psize; //每页显示行数
        //总共分几页
        if(num/pageSize > parseInt(num/pageSize)) {
          totalPage = parseInt(num/pageSize) + 1;
        } else {
          totalPage = parseInt(num/pageSize);
        }
        let currentPage = pno;//当前页数
        let startRow = (currentPage - 1) * pageSize + 1;//开始显示的行 
        let endRow = currentPage * pageSize; //结束显示的行 
        endRow = (endRow > num) ? num : endRow;
        console.log(startRow);
        console.log(endRow);

        //遍历显示数据实现分页
        for(let i = 1; i < (num + 1); i++) {
          let irow = itable.rows[i - 1];
          if (i >= startRow && i <= endRow) {
            console.log(irow);
            irow.style.display = 'block';
          } else {
            irow.style.display = 'none';
          }
        }

        let tempStr = `共 ${num} 条记录 分 ${totalPage} 页 当前第 ${currentPage} 页 `;
        if(currentPage > 1) {
          tempStr += `<a href="#" onClick="goPage((1), ${psize})">首页 </a>`;
          tempStr += `<a href="#" onClick="goPage(${currentPage - 1}, ${psize})"><上一页</a>`
        } else {
          tempStr += '首页 ';
          tempStr += '<上一页 ';
        };

        if(currentPage < totalPage) {
          tempStr += `<a href="#" onClick="goPage(${currentPage + 1}, ${psize})">>下一页 </a>`;
          tempStr += `<a href="#" onClick="goPage(${totalPage}, ${psize})">尾页</a>`
        } else {
          tempStr += `下一页 `;
          tempStr += `尾页`;
        }

        document.getElementById('barcon').innerHTML = tempStr;
      }
    </script>
</body>
</html>
